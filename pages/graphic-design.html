<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Graphic Design â€” Farhan Kamal</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../assets/css/styles.css" />
  <style>
    /* Pinterest-style gallery for Graphic Design page */
    .gd-pinterest-gallery{ columns: 3; column-gap: 20px; margin-top: 16px; }
    .gd-pin-item{ break-inside: avoid; margin-bottom: 20px; border-radius: 12px; overflow: hidden; background: var(--surface-2); border: 1px solid var(--line-2); }
    .gd-pin-item img{ width:100%; height:auto; display:block; object-fit:cover; }
    .gd-pin-cap{ padding: 12px; color: var(--muted); font-size: 12px; }
    @media (max-width: 900px){ .gd-pinterest-gallery{ columns:2; column-gap:16px } }
    @media (max-width: 520px){ .gd-pinterest-gallery{ columns:1 } }
  </style>
</head>
<body>
  <header role="banner" aria-label="Primary">
    <nav class="container" role="navigation" aria-label="Main">
      <a href="../index.html" class="logo" aria-label="Go to Home">Farhan Kamal</a>
      <div class="nav-right">
        <div class="menu">
          <button class="menu-btn" id="workMenuBtn" aria-haspopup="true" aria-expanded="false" aria-controls="workMenu">Work â–¾</button>
          <div class="menu-list" id="workMenu" role="menu" aria-label="Work categories">
            <a class="menu-item" role="menuitem" href="../index.html#recent-projects">All Projects</a>
            <a class="menu-item" role="menuitem" href="graphic-design.html">Graphic Design</a>
            <a class="menu-item" role="menuitem" href="web-design.html">Web Design</a>
            <a class="menu-item" role="menuitem" href="ux-ui-design.html">UX/UI</a>
            <a class="menu-item" role="menuitem" href="game-design.html">Game Design</a>
          </div>
        </div>
        <button class="search-cta" id="openSearchBtn" aria-haspopup="dialog" aria-controls="cmd" aria-label="Open search"><span>Search</span><span class="kbd">/</span></button>
        <a href="../index.html#connect" class="menu-btn" aria-label="Contact">Contact</a>
      </div>
    </nav>
  </header>

  <div id="cmd" class="cmd" hidden>
    <div class="cmd-panel" role="dialog" aria-modal="true" aria-labelledby="cmdLabel">
      <div class="cmd-head"><span class="cmd-icon">ðŸ”Ž</span><input type="text" id="cmdInput" placeholder="Search pages & projectsâ€¦" aria-label="Search input" /><span class="kbd" aria-hidden="true">Esc</span></div>
      <div id="cmdResults" role="listbox" aria-label="Search results"></div>
    </div>
  </div>

  <main>
    <div id="quickModal" class="modal" hidden>
      <div class="modal-panel" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
        <div class="modal-head"><div class="modal-title" id="modalTitle"></div><button id="modalClose" class="modal-close" aria-label="Close">âœ•</button></div>
        <div id="modalBody" class="modal-body"></div>
      </div>
    </div>
    <div class="page-hero"><div class="container"><h1 class="page-title">Graphic Design</h1><p class="page-subtitle">Visual storytelling through creative design</p></div></div>
    <section>
      <div class="container">
        <div id="grid" class="portfolio-grid" aria-live="polite"></div>
      </div>
    </section>
    <section>
      <div class="container">
        <h2 class="section-title" style="margin-top:0">Gallery</h2>
        <p class="experience-description" style="color: var(--muted); margin: 8px 0 16px;">A visual dump of assorted graphics I've created.</p>
        <div id="gdGallery" class="gd-pinterest-gallery" aria-live="polite"></div>
      </div>
    </section>
  </main>

  <footer role="contentinfo" aria-label="Footer">
    <div class="container" style="padding: 28px 0; text-align:center; color: var(--muted); font-size: 14px;">www.visuallyindie.dev</div>
  </footer>

  <script src="../assets/js/site.js" data-root="../"></script>
  <script>
    document.addEventListener('DOMContentLoaded', async () => {
      const grid = document.getElementById('grid');
      try {
        const items = await fetch('../data/graphic-design.json').then(r => r.json());
        window.__siteProjects = items;
        items.forEach(p => grid.appendChild((function(p){
          const card = document.createElement('a');
          card.className = 'portfolio-item';
          card.href = p.url || '#';
          card.innerHTML = `
            <div class="portfolio-image">${p.image ? `<img src="${p.image}" alt="${p.title}">` : 'Preview'}</div>
            <div class="portfolio-content"><h3 class="project-title">${p.title}</h3><p class="experience-description">${p.description || ''}</p></div>
          `;
          card.addEventListener('click', (e) => {
            if (p.detail && typeof p.detail === 'string') { e.preventDefault(); (function(){ const m = document.getElementById('quickModal'); if (!m) return; const t = document.getElementById('modalTitle'); const b = document.getElementById('modalBody'); t.textContent = p.title; b.innerHTML = p.detail; m.hidden = false; })(); }
          });
          return card;
        })(p)));
      } catch (e) {
        grid.innerHTML = '<div style="color:var(--muted)">Failed to load items.</div>';
        console.error(e);
      }

      // Load Pinterest-style gallery images from folder
      const gallery = document.getElementById('gdGallery');
      const basePath = '../projects/graphic-design/gallery/';
      try {
        const res = await fetch(basePath + 'gallery-index.json', { cache: 'no-store' });
        let entries = [];
        if (res.ok) {
          const json = await res.json();
          // Accept ["file.png", ...] or [{src:"file.png", caption:"..."}, ...]
          entries = Array.isArray(json) ? json : [];
        }

        if (!Array.isArray(entries) || entries.length === 0) {
          // Fallback: probe common patterns (limited attempts to avoid excessive requests)
          const patterns = ['image-', 'img-', 'photo-'];
          const maxPerPattern = 20;
          const probes = [];
          patterns.forEach(prefix => {
            for (let i = 1; i <= maxPerPattern; i++) {
              const name = `${prefix}${i}.png`;
              probes.push(name);
            }
          });
          const results = await Promise.allSettled(probes.map(name => fetch(basePath + name, { method: 'HEAD' })));
          entries = results.map((r, idx) => (r.status === 'fulfilled' && r.value.ok) ? probes[idx] : null).filter(Boolean);
        }

        const toRender = entries
          .map(e => typeof e === 'string' ? { src: e, caption: '' } : e)
          .filter(e => typeof e.src === 'string' && e.src.toLowerCase().endsWith('.png'));

        toRender.forEach(item => {
          const wrap = document.createElement('div');
          wrap.className = 'gd-pin-item';
          wrap.innerHTML = `
            <img src="${basePath + item.src}" alt="${item.caption || 'Graphic'}" onerror="this.style.display='none'; this.nextElementSibling.style.display='block'">
            <div style="display:none; width:100%; height:160px; background: linear-gradient(180deg, var(--surface), var(--surface-2)); place-items:center; color:var(--muted); font-style:italic;">${item.src}</div>
            ${item.caption ? `<div class='gd-pin-cap'>${item.caption}</div>` : ''}
          `;
          gallery.appendChild(wrap);
        });

        if (gallery.children.length === 0) {
          gallery.innerHTML = '<div style="color:var(--muted)">Add .png files to projects/graphic-design/gallery (and optionally list them in gallery-index.json)</div>';
        }
      } catch (err) {
        console.error(err);
        const gallery = document.getElementById('gdGallery');
        if (gallery) gallery.innerHTML = '<div style="color:var(--muted)">Failed to load gallery.</div>';
      }
    });
  </script>
</body>
</html>


